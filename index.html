<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Telegram Login Demo</title>
</head>

<body>
    <!-- <div style="z-index: 9999999;">
        <div>第三方登录2</div>
        <script async src="https://telegram.org/js/telegram-widget.js?22" data-telegram-login="XiangNan3_bot" data-size="large" data-onauth="onTelegramAuth(user)" data-request-access="write"></script>
    </div>
       <div id="id"></div>
       <div id="name"></div>
       <div id="hash"></div>
       <div id="auth_date"></div>
       <script type="text/javascript">
          function onTelegramAuth(user) {
            console.log("用户信息",user);
            // alert('Logged in as ' + user.first_name + ' ' + user.last_name + ' (' + user.id + (user.username ? ', @' + user.username : '') + ')');
            // alert('Logged in as Id'+user.id+"用户名称" + user.first_name + ' ' + user.hash + "auth_date:"+user.auth_date );
            document.getElementById("id").innerHTML ="id："+ user.id
            document.getElementById("name").innerHTML ="用户名："+user.first_name
            document.getElementById("hash").innerHTML ="hash："+ user.hash
            document.getElementById("auth_date").innerHTML ="auth_date："+user.auth_date
          }
        </script> -->
        <!-- <h1>Welcome to Telegram Mini App</h1>
        <button id="telegram-login">Login with Telegram</button>
        <script src="https://telegram.org/js/telegram-web-app.js"></script>
        <script>
            Telegram.WebApp.onEvent('auth', (user) => {
                alert('Logged in as ' + user.first_name + ' ' + user.last_name + ' (' + user.id + (user.username ? ', @' + user.username : '') + ')');
            });
    
            document.getElementById('telegram-login').addEventListener('click', () => {
                Telegram.WebApp.login();
            });
        </script> -->
        <h1>Welcome to Telegram Mini App</h1>
        <div id="user-info"></div>
        <script src="https://telegram.org/js/telegram-web-app.js"></script>
        <script>
            // 模拟Telegram Web App初始化数据
            const mockInitData = {
                user: {
                    id: 123456789,
                    first_name: "Test",
                    last_name: "User",
                    username: "testuser"
                }
            };
    
            // 使用模拟数据代替实际的初始化数据
            window.Telegram = {
                WebApp: {
                    initDataUnsafe: mockInitData,
                    ready: () => {
                        console.log("Telegram Web App is ready");
                    }
                }
            };
    
            // 初始化Telegram Web App
            window.Telegram.WebApp.ready();
    
            // 获取用户信息并显示
            const user = window.Telegram.WebApp.initDataUnsafe.user;
            if (user) {
                document.getElementById('user-info').innerHTML = `<p>Logged in as ${user.first_name} ${user.last_name} (${user.id})</p>`;
            } else {
                document.getElementById('user-info').innerHTML = `<p>Not logged in</p>`;
            }
        </script>
</body>

</html>